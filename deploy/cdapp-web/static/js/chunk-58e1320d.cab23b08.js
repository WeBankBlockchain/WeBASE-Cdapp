(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58e1320d"],{"00c9":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"config"},[a("div",{staticClass:"step"},[a("el-steps",{attrs:{active:e.active,"finish-status":"success"}},[a("el-step",{attrs:{title:"证书图片配置"}}),a("el-step",{attrs:{title:"查询页配置"}}),a("el-step",{attrs:{title:"查询结果页配置"}}),a("el-step",{attrs:{title:"导入数据"}})],1)],1),1===e.active?a("certificate-config-img",{on:{jumpPage:e.jumpPage}}):e._e(),2===e.active?a("certificate-config-query",{on:{jumpPage:e.jumpPage}}):e._e(),3===e.active?a("certificate-config-result",{on:{jumpPage:e.jumpPage}}):e._e(),4===e.active?a("certificate-config-import",{on:{jumpPage:e.jumpPage}}):e._e()],1)},i=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"imgConfig"},[r("el-form",{ref:"configData",staticClass:"demo-configData",attrs:{model:e.configData,rules:e.rules}},[r("el-form-item",{attrs:{label:"证书名称",prop:"certName"}},[r("el-input",{staticClass:"certificate_name_input",model:{value:e.configData.certName,callback:function(t){e.$set(e.configData,"certName",t)},expression:"configData.certName"}})],1),r("el-form-item",{attrs:{label:"底图",prop:"baseMap"}},[r("el-checkbox-group",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.configData.baseMap,callback:function(t){e.$set(e.configData,"baseMap",t)},expression:"configData.baseMap"}}),r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#","on-change":e.handlePreview,limit:1,"file-list":e.fileList,"on-exceed":e.handleExceed,"auto-upload":!1}},[e.configData.baseMap?r("img",{staticClass:"avatar",attrs:{src:e.configData.baseMap}}):r("div",[r("img",{attrs:{src:a("9dc0")}}),r("span",[e._v("上传图片")])])])],1),r("el-form-item",{attrs:{label:"二维码链接",prop:"qrCodeUrl"}},[r("el-input",{model:{value:e.configData.qrCodeUrl,callback:function(t){e.$set(e.configData,"qrCodeUrl",t)},expression:"configData.qrCodeUrl"}})],1),r("el-form-item",{staticClass:"fileds",attrs:{label:"定义填充字段",prop:"fields"}},[r("div",{staticClass:"filedTip"},[r("span",[e._v("1、如有编号，请定义编号显示位置")]),r("br"),r("span",[e._v("2、结果页需要展示的列表信息也需要在这里定义添加，并设置为“不显示”")]),r("br"),r("span",[e._v("3、请先定义证书图片上需要展示的信息，后添加其他信息")])]),r("div",{staticClass:"content"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.configData.fields}},[r("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),r("el-table-column",{attrs:{prop:"filedName",label:"字段名称",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{prop:"fields."+t.$index+".filedName",rules:e.rules.filedName}},[r("el-input",{attrs:{clearable:"",disabled:0===t.$index},model:{value:t.row["filedName"],callback:function(a){e.$set(t.row,"filedName",a)},expression:"scope.row['filedName']"}})],1)]}}])}),r("el-table-column",{attrs:{prop:"filedNameZh",label:"字段中文名",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{prop:"fields."+t.$index+".filedNameZh",rules:e.rules.filedName}},[r("el-input",{attrs:{clearable:"",disabled:0===t.$index},model:{value:t.row["filedNameZh"],callback:function(a){e.$set(t.row,"filedNameZh",a)},expression:"scope.row['filedNameZh']"}})],1)]}}])}),r("el-table-column",{attrs:{prop:"filedDemo",label:"预览值",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{prop:"fields."+t.$index+".filedDemo",rules:e.rules.filedName}},[r("el-input",{attrs:{clearable:""},model:{value:t.row["filedDemo"],callback:function(a){e.$set(t.row,"filedDemo",a)},expression:"scope.row['filedDemo']"}})],1)]}}])}),r("el-table-column",{attrs:{prop:"",label:"是否显示",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-select",{staticStyle:{width:"90px"},on:{change:function(a){return e.reset(t.row)}},model:{value:t.row["showEnable"],callback:function(a){e.$set(t.row,"showEnable",a)},expression:"scope.row['showEnable']"}},e._l(e.showList,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[r("span",[e._v(e._s(t.label))])])})),1)]}}])}),r("el-table-column",{attrs:{prop:"x",label:"X"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{prop:"fields."+t.$index+".x",rules:e.rules.coordinate}},[t.row["showEnable"]?r("el-input",{model:{value:t.row["x"],callback:function(a){e.$set(t.row,"x",a)},expression:"scope.row['x']"}}):e._e()],1)]}}])}),r("el-table-column",{attrs:{prop:"y",label:"Y"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{prop:"fields."+t.$index+".y",rules:e.rules.coordinate}},[t.row["showEnable"]?r("el-input",{model:{value:t.row["y"],callback:function(a){e.$set(t.row,"y",a)},expression:"scope.row['y']"}}):e._e()],1)]}}])}),r("el-table-column",{attrs:{prop:"w",label:"W"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{prop:"fields."+t.$index+".w",rules:e.rules.coordinate}},[t.row["showEnable"]?r("el-input",{model:{value:t.row["w"],callback:function(a){e.$set(t.row,"w",a)},expression:"scope.row['w']"}}):e._e()],1)]}}])}),r("el-table-column",{attrs:{prop:"h",label:"H"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{prop:"fields."+t.$index+".h",rules:e.rules.coordinate}},[t.row["showEnable"]?r("el-input",{model:{value:t.row["h"],callback:function(a){e.$set(t.row,"h",a)},expression:"scope.row['h']"}}):e._e()],1)]}}])}),r("el-table-column",{attrs:{prop:"operate",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row["delete"]?e._e():r("span",{staticClass:"delete",attrs:{type:""},on:{click:function(a){return e.deleteField(t.row)}}},[e._v("删除")])]}}])})],1),r("div",{staticClass:"operate"},[r("div",{staticClass:"addField",on:{click:e.addField}},[r("img",{attrs:{src:a("841c")}}),e._v("新增字段")]),r("div",{staticClass:"export",on:{click:e.exportField}},[r("img",{attrs:{src:a("f8a5")}}),e._v("导出Excel模板")])])],1)]),r("el-form-item",{staticClass:"fontItem",attrs:{label:"编号字体",prop:"filedFont"}},[r("div",{staticClass:"id_font"},[r("div",{staticClass:"fontSize"},[r("span",[e._v("font-size")]),r("el-input",{model:{value:e.configData.filedFont,callback:function(t){e.$set(e.configData,"filedFont",t)},expression:"configData.filedFont"}})],1),r("div",{staticClass:"recover",on:{click:function(t){return e.recoverIdFontSize()}}},[r("img",{attrs:{src:a("c150")}}),r("span",[e._v("恢复默认")])])])]),r("el-form-item",{staticClass:"fontItem",attrs:{label:"填充字段字体",prop:"numFont"}},[r("div",{staticClass:"font"},[r("div",{staticClass:"fontSize"},[r("span",[e._v("font-size")]),r("el-input",{model:{value:e.configData.numFont,callback:function(t){e.$set(e.configData,"numFont",t)},expression:"configData.numFont"}})],1),r("div",{staticClass:"recover",on:{click:function(t){return e.recoverFiledFontSize()}}},[r("img",{attrs:{src:a("c150")}}),r("span",[e._v("恢复默认")])])])]),r("div",{attrs:{label:"二维码"}},[r("div",{staticClass:"code_p"},[r("el-form-item",{attrs:{prop:"qrCodeLocal.x",label:"二维码位置"}},[r("div",{staticClass:"code_x"},[r("span",[e._v("X")]),r("el-input",{model:{value:e.configData.qrCodeLocal.x,callback:function(t){e.$set(e.configData.qrCodeLocal,"x",t)},expression:"configData.qrCodeLocal.x"}})],1)]),r("el-form-item",{attrs:{prop:"qrCodeLocal.y","label-width":"0"}},[r("div",{staticClass:"code_y"},[r("span",[e._v("Y")]),r("el-input",{model:{value:e.configData.qrCodeLocal.y,callback:function(t){e.$set(e.configData.qrCodeLocal,"y",t)},expression:"configData.qrCodeLocal.y"}})],1)]),r("el-form-item",{attrs:{prop:"qrCodeLocal.w","label-width":"0"}},[r("div",{staticClass:"code_w"},[r("span",[e._v("W")]),r("el-input",{model:{value:e.configData.qrCodeLocal.w,callback:function(t){e.$set(e.configData.qrCodeLocal,"w",t)},expression:"configData.qrCodeLocal.w"}})],1)]),r("el-form-item",{attrs:{prop:"qrCodeLocal.h","label-width":"0"}},[r("div",{staticClass:"code_h"},[r("span",[e._v("H")]),r("el-input",{model:{value:e.configData.qrCodeLocal.h,callback:function(t){e.$set(e.configData.qrCodeLocal,"h",t)},expression:"configData.qrCodeLocal.h"}})],1)]),r("div",{staticClass:"recover",on:{click:function(t){return e.recoverCodeP()}}},[r("img",{attrs:{src:a("c150")}}),r("span",[e._v("恢复默认")])])],1)]),r("el-form-item",{staticClass:"btn",staticStyle:{"margin-top":"20px"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("configData")}}},[e._v("下一步")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveConfig("configData")}}},[e._v("保存配置")]),r("el-button",{attrs:{disabled:e.previewAble},on:{click:function(t){return e.Preview("configData")}}},[r("img",{attrs:{src:a("d02e")}}),e._v("预览模板")])],1)],1),e.previewPicShow?r("el-dialog",{staticClass:"dialogPreviewPic",attrs:{visible:e.previewPicShow,width:"800px",height:"560px","append-to-body":!0,center:""},on:{"update:visible":function(t){e.previewPicShow=t}}},[r("preview-pic",{attrs:{ImgUrlData:e.previewCertPicData}})],1):e._e()],1)},n=[],o=a("ade3"),c=a("5530"),l=(a("e9c4"),a("d3b7"),a("b64b"),a("a434"),a("159b"),a("ad8f")),u=a("6d1d"),f=a("25ca"),d=a("2f62"),p={components:{previewPic:u["a"]},data:function(){return{configData:{certName:"",baseMap:"",qrCodeUrl:"",numFont:"34",filedFont:"28",qrCodeLocal:{h:"48",w:"180",x:"234",y:"518"},fields:[{delete:"no",filedName:"certificatID",filedNameZh:"证书编号",filedDemo:"default",x:"0",y:"0",h:"0",w:"0",showEnable:0}]},fieldTemplate:{filedName:"default",filedNameZh:"default",filedDemo:"default",x:0,y:0,h:0,w:0,showEnable:1},showList:[{label:"显示",value:1},{label:"不显示",value:0}],fileList:[],previewAble:!0,previewPicShow:!1,saveSuccessData:null,querySuccessData:null,previewCertPicData:null,rules:{certName:[{required:!0,message:"请输入证书名称",trigger:"blur"}],fields:[{required:!0,message:"",trigger:"blur"}],baseMap:[{required:!0,message:"请上传证书底图",trigger:"change"}],qrCodeUrl:[{required:!0,message:"请输入二维码url",trigger:"blur"}],numFont:[{required:!0,message:"请输入填充字段字体大小",trigger:["blur","change"]}],"qrCodeLocal.x":[{required:!0,message:"请输入二维码X坐标",trigger:"blur"}],"qrCodeLocal.y":[{required:!0,message:"请输入二维码Y坐标",trigger:"blur"}],"qrCodeLocal.w":[{required:!0,message:"请输入二维码宽度",trigger:"blur"}],"qrCodeLocal.h":[{required:!0,message:"请输入二维码高度",trigger:"blur"}],filedFont:[{required:!0,message:"请输入编号字体大小",trigger:["blur","change"]}],filedName:[{required:!0,message:"字段不能为空",trigger:"blur"}],coordinate:[{required:!0,message:"不能为空",trigger:"blur"}],certificateQuery_icon:[{required:!0,message:"请上传证书查询-图标",trigger:"blur"}],certificateQuery_supply:[{required:!0,message:"请输入证书查询-技术支持",trigger:"blur"}]}}},computed:Object(c["a"])({},Object(d["b"])(["certificate_Id","step"])),created:function(){this.certificate_Id&&this.queryCertPice_Way()},methods:Object(c["a"])(Object(c["a"])({},Object(d["c"])("user",["SET_CERTIFICATE_ID","SET_STEP","SET_LOADING"])),{},{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.saveCertPic_Way(!0)}))},Preview:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.preViewImg()}))},preViewImg:function(){var e=this,t={id:this.certificate_Id};Object(l["k"])(t).then((function(t){0===t.code?(e.previewCertPicData=t.result,e.previewPicShow=!0):e.$message({message:"系统错误",type:"error",duration:2e3})}))},reset:function(e){this.$refs["configData"].clearValidate(),e.x=0,e.y=0,e.w=0,e.h=0},saveConfig:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.saveCertPic_Way()}))},queryCertPice_Way:function(){var e=this;if(this.certificate_Id){var t={id:this.certificate_Id};Object(l["l"])(t).then((function(t){0===t.code?(e.configData=t.result,e.configData.fields[0].delete="no",e.previewAble=!1):e.$message({message:"系统错误",type:"error",duration:2e3})}))}},saveCertPic_Way:function(e){var t=this;this.SET_LOADING(!0);var a=this.configData;this.certificate_Id&&(a.id=this.certificate_Id),Object(l["m"])(a).then((function(a){0===a.code?(t.SET_LOADING(!1),t.$message({type:"success",message:"证书图片配置成功！"}),t.saveSuccessData=a.result,t.SET_CERTIFICATE_ID(a.result.id),localStorage.setItem("saveSuccessData",JSON.stringify(a.result)),t.previewAble=!1,e&&t.$emit("jumpPage",2)):(t.SET_LOADING(!1),t.$message({message:"系统错误",type:"error",duration:2e3}))}))},resetForm:function(e){this.$refs[e].resetFields()},handlePreview:function(e,t){var a=this;console.log(e),this.getBase64(e.raw).then((function(e){a.configData.baseMap=e}))},getBase64:function(e){return new Promise((function(t,a){var r=new FileReader,i="";r.readAsDataURL(e),r.onload=function(){i=r.result},r.onerror=function(e){a(e)},r.onloadend=function(){t(i)}}))},handleExceed:function(e,t){this.$message({message:"当前限制选择 1 个文件，请移除后再上传！",type:"warning"})},addField:function(){this.configData.fields.push(JSON.parse(JSON.stringify(this.fieldTemplate)))},deleteField:function(e){console.log(e),this.configData.fields.splice(this.configData.fields.indexOf(e),1)},exportField:function(){var e={};this.configData.fields.forEach((function(t){e[t.filedNameZh]=""})),e=[e],console.log(e);var t={SheetNames:["sheet1"],Sheets:Object(o["a"])({},"sheet1",f["a"].json_to_sheet(e))};f["b"](t,"certificateFields.xlsx")},recoverIdFontSize:function(){this.configData.filedFont=28},recoverFiledFontSize:function(){this.configData.numFont=34},recoverCodeP:function(){this.configData.qrCodeLocal={h:"48",w:"180",x:"234",y:"518"},this.$refs["configData"].clearValidate()}})},m=p,g=(a("ab4e"),a("2877")),v=Object(g["a"])(m,s,n,!1,null,"3496249c",null),h=v.exports,b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"queryConfig"},[r("el-form",{ref:"queryData",staticClass:"demo-queryData",attrs:{model:e.queryData,rules:e.rules}},[r("el-form-item",{attrs:{label:"banner",prop:"banner"}},[r("el-checkbox-group",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.queryData.banner,callback:function(t){e.$set(e.queryData,"banner",t)},expression:"queryData.banner"}}),r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#","on-change":e.handlePreview,limit:1,"file-list":e.fileList,"on-exceed":e.handleExceed,"auto-upload":!1}},[e.queryData.banner?r("img",{staticClass:"avatar",attrs:{src:e.queryData.banner}}):r("div",[r("img",{attrs:{src:a("9dc0")}}),r("span",[e._v("上传图片")])])])],1),r("el-form-item",{attrs:{label:"发证机构",prop:"certOrg"}},[r("el-input",{model:{value:e.queryData.certOrg,callback:function(t){e.$set(e.queryData,"certOrg",t)},expression:"queryData.certOrg"}})],1),r("el-form-item",{attrs:{label:"搜索字段选择",prop:"filedSerial"}},[r("el-select",{attrs:{placeholder:"请选择搜索字段"},on:{change:e.produceSearchHint},model:{value:e.queryData.filedSerial,callback:function(t){e.$set(e.queryData,"filedSerial",t)},expression:"queryData.filedSerial"}},e._l(e.queryData.fields,(function(e){return r("el-option",{key:e.filedSerial,attrs:{label:e.filedNameZh,value:e.filedSerial}})})),1)],1),r("el-form-item",{attrs:{label:"页面底部logo",prop:"bottomLog"}},[r("el-checkbox-group",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.queryData.bottomLog,callback:function(t){e.$set(e.queryData,"bottomLog",t)},expression:"queryData.bottomLog"}}),r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#","on-change":e.handlePreviewLogo,limit:1,"file-list":e.fileLogoList,"on-exceed":e.handleExceed,"auto-upload":!1}},[e.queryData.bottomLog?r("img",{staticClass:"avatar",attrs:{src:e.queryData.bottomLog}}):r("div",[r("img",{attrs:{src:a("9dc0")}}),r("span",[e._v("上传图片")])])])],1),r("el-form-item",{attrs:{label:"技术支持说明文案",prop:"explainDoc"}},[r("el-input",{model:{value:e.queryData.explainDoc,callback:function(t){e.$set(e.queryData,"explainDoc",t)},expression:"queryData.explainDoc"}})],1),r("el-form-item",{staticClass:"btn",staticStyle:{"margin-top":"32px"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.next("queryData")}}},[e._v("下一步")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveConfig("queryData")}}},[e._v("保存配置")]),r("el-button",{on:{click:function(t){return e.lastStep("queryData")}}},[e._v("上一步")]),r("el-button",{on:{click:function(t){return e.Preview("queryData")}}},[r("img",{attrs:{src:a("d02e")}}),e._v("预览模板")])],1)],1),e.previewQueryShow?r("el-dialog",{staticClass:"previewQuery",attrs:{visible:e.previewQueryShow,title:"证书查询",width:"375px","append-to-body":!0,center:""},on:{"update:visible":function(t){e.previewQueryShow=t}}},[r("preview-query",{attrs:{previewCertQueryData:e.previewCertQueryData}})],1):e._e()],1)},D=[],w=a("c328"),_={components:{previewQuery:w["a"]},data:function(){return{queryData:{banner:"",certOrg:"",searchHint:"",bottomLog:"",explainDoc:"",fields:[],filedSerial:""},CertificateQueryData:null,previewCertQueryData:null,previewQueryShow:!1,fileList:[],fileLogoList:[],rules:{certOrg:[{required:!0,message:"请输入发证机构",trigger:"blur"}],banner:[{required:!0,message:"请上传证书底图",trigger:"change"}],filedSerial:[{required:!0,message:"请选择搜索项",trigger:"change"}],bottomLog:[{required:!0,message:"请上传底部Logo",trigger:"change"}],explainDoc:[{required:!0,message:"请输入技术支持说明文案",trigger:"blur"}]}}},computed:Object(c["a"])({},Object(d["b"])(["certificate_Id","step"])),created:function(){this.queryCertificateQueryData()},methods:Object(c["a"])(Object(c["a"])({},Object(d["c"])("user",["SET_CERTIFICATE_ID","SET_STEP","SET_LOADING"])),{},{queryCertificateQueryData:function(){var e=this,t={certConfigId:this.certificate_Id};Object(l["h"])(t).then((function(t){if(0===t.code){if(!t.result)return!1;e.queryData=t.result}else e.$message({message:"系统错误",type:"error",duration:2e3})}))},Preview:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.preViewImg()}))},preViewImg:function(){this.previewCertQueryData=this.queryData,this.previewQueryShow=!0},saveConfig:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.saveCertQuery_Way()}))},saveCertQuery_Way:function(e){var t=this;this.SET_LOADING(!0);var a={certConfigId:this.certificate_Id,banner:this.queryData.banner,certOrg:this.queryData.certOrg,searchHint:this.queryData.searchHint,bottomLog:this.queryData.bottomLog,explainDoc:this.queryData.explainDoc,filedSerial:this.queryData.filedSerial};Object(l["n"])(a).then((function(a){0===a.code?(t.SET_LOADING(!1),t.$message({type:"success",message:"证书查询页配置成功！"}),t.tableData=a.result,e&&t.$emit("jumpPage",3)):(t.SET_LOADING(!1),t.$message({message:"系统错误",type:"error",duration:2e3}))}))},resetForm:function(e){this.$refs[e].resetFields()},handlePreview:function(e,t){var a=this;console.log(e),this.getBase64(e.raw).then((function(e){a.queryData.banner=e}))},handlePreviewLogo:function(e,t){var a=this;console.log(e),this.getBase64(e.raw).then((function(e){a.queryData.bottomLog=e}))},getBase64:function(e){return new Promise((function(t,a){var r=new FileReader,i="";r.readAsDataURL(e),r.onload=function(){i=r.result},r.onerror=function(e){a(e)},r.onloadend=function(){t(i)}}))},handleExceed:function(e,t){this.$message({message:"当前限制选择 1 个文件，请移除后再上传！",type:"warning"})},addField:function(){this.queryData.certificate_fields.push(JSON.parse(JSON.stringify(this.fieldTemplate)))},deleteField:function(e){console.log(e),this.queryData.certificate_fields.splice(this.queryData.certificate_fields.indexOf(e),1)},lastStep:function(){this.$emit("jumpPage",1)},next:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.saveCertQuery_Way(!0)}))},produceSearchHint:function(e){this.queryData.searchHint="请输入"+this.queryData.fields[e].filedNameZh+"查询"}})},C=_,y=(a("cd9b"),Object(g["a"])(C,b,D,!1,null,"3abf5002",null)),x=y.exports,S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"resultConfig"},[r("el-form",{ref:"resultData",staticClass:"demo-resultData",attrs:{model:e.resultData,rules:e.rules}},[r("el-form-item",{attrs:{label:"结果页标题",prop:"title"}},[r("el-input",{model:{value:e.resultData.title,callback:function(t){e.$set(e.resultData,"title",t)},expression:"resultData.title"}})],1),r("el-form-item",{attrs:{label:"显示字段",prop:"enableFields"}},[r("el-checkbox-group",{on:{change:e.updateSelectedOptions},model:{value:e.resultData.enableFields,callback:function(t){e.$set(e.resultData,"enableFields",t)},expression:"resultData.enableFields"}},e._l(e.resultData.fields,(function(t,a){return r("el-checkbox",{key:t.id,attrs:{label:JSON.stringify(t)}},[e._v(e._s(t.filedNameZh))])})),1)],1),r("el-form-item",{attrs:{label:"页面底部logo",prop:"bottomLog"}},[r("el-checkbox-group",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.resultData.bottomLog,callback:function(t){e.$set(e.resultData,"bottomLog",t)},expression:"resultData.bottomLog"}}),r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#","on-change":e.handlePreviewLogo,limit:1,"file-list":e.fileLogoList,"on-exceed":e.handleExceed,"auto-upload":!1}},[e.resultData.bottomLog?r("img",{staticClass:"avatar",attrs:{src:e.resultData.bottomLog}}):r("div",[r("img",{attrs:{src:a("9dc0")}}),r("span",[e._v("上传图片")])])])],1),r("el-form-item",{attrs:{label:"技术支持说明文案",prop:"explainDoc"}},[r("el-input",{model:{value:e.resultData.explainDoc,callback:function(t){e.$set(e.resultData,"explainDoc",t)},expression:"resultData.explainDoc"}})],1),r("el-form-item",{staticClass:"btn",staticStyle:{"margin-top":"32px"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.next("resultData")}}},[e._v("下一步")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveConfig("resultData")}}},[e._v("保存配置")]),r("el-button",{on:{click:function(t){return e.lastStep("resultData")}}},[e._v("上一步")]),r("el-button",{on:{click:function(t){return e.Preview("resultData")}}},[r("img",{attrs:{src:a("d02e")}}),e._v("预览模板")])],1)],1),e.previewResultShow?r("el-dialog",{staticClass:"previewQuery",attrs:{visible:e.previewResultShow,title:"查询结果",width:"375px","append-to-body":!0,center:""},on:{"update:visible":function(t){e.previewResultShow=t}}},[r("preview-result",{attrs:{previewCertResultData:e.previewCertResultData}})],1):e._e()],1)},q=[],O=a("2909"),L=(a("4de4"),a("caad"),a("2532"),a("99af"),a("0fbe")),I={components:{previewResult:L["a"]},data:function(){var e=function(e,t,a){0===t.length?a(new Error("请选择显示字段")):a()};return{resultData:{title:"",fields:[],bottomLog:"",explainDoc:"",enableFields:[]},fields:[],fileLogoList:[],previewCertResultData:null,previewResultShow:!1,prevSelectedOptions:[],rules:{title:[{required:!0,message:"请输入结果页标题",trigger:"blur"}],bottomLog:[{required:!0,message:"请上传页面底部logo",trigger:"change"}],enableFields:[{required:!0,message:"请选择显示字段",trigger:"blur"},,{validator:e,trigger:"change"}],explainDoc:[{required:!0,message:"请输入技术支持说明文案",trigger:"blur"}]}}},computed:Object(c["a"])({},Object(d["b"])(["certificate_Id","step"])),created:function(){this.queryCertificateResultData()},methods:Object(c["a"])(Object(c["a"])({},Object(d["c"])("user",["SET_CERTIFICATE_ID","SET_STEP","SET_LOADING"])),{},{queryCertificateResultData:function(){var e=this,t={certConfigId:this.certificate_Id};Object(l["i"])(t).then((function(t){if(0===t.code){if(!t.result)return!1;e.resultData=t.result,e.resultData.enableFields||(e.resultData.enableFields=[]),e.updateSelectedOptions(e.resultData.enableFields)}else e.$message({message:"系统错误",type:"error",duration:2e3})}))},Preview:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.preViewImg()}))},preViewImg:function(){this.previewCertResultData=this.resultData,this.previewResultShow=!0},saveConfig:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.saveCertResult_Way()}))},saveCertResult_Way:function(e){var t=this;this.SET_LOADING(!0);var a={certConfigId:this.certificate_Id,title:this.resultData.title,enableFields:this.resultData.enableFields,bottomLog:this.resultData.bottomLog,explainDoc:this.resultData.explainDoc};Object(l["o"])(a).then((function(a){0===a.code?(t.SET_LOADING(!1),t.$message({type:"success",message:"证书结果页配置成功！"}),t.queryCertificateResultData(),e&&t.$emit("jumpPage",4)):(t.SET_LOADING(!1),t.$message({message:"系统错误",type:"error",duration:2e3}))}))},resetForm:function(e){this.$refs[e].resetFields()},handlePreview:function(e,t){var a=this;console.log(e),this.getBase64(e.raw).then((function(e){a.resultData.certificate_banner=e}))},handlePreviewLogo:function(e,t){var a=this;console.log(e),this.getBase64(e.raw).then((function(e){a.resultData.bottomLog=e}))},getBase64:function(e){return new Promise((function(t,a){var r=new FileReader,i="";r.readAsDataURL(e),r.onload=function(){i=r.result},r.onerror=function(e){a(e)},r.onloadend=function(){t(i)}}))},handleExceed:function(e,t){this.$message({message:"当前限制选择 1 个文件，请移除后再上传！",type:"warning"})},addField:function(){this.resultData.certificate_fields.push(JSON.parse(JSON.stringify(this.fieldTemplate)))},deleteField:function(e){console.log(e),this.resultData.certificate_fields.splice(this.resultData.certificate_fields.indexOf(e),1)},lastStep:function(){this.$emit("jumpPage",2)},next:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.saveCertResult_Way(!0)}))},updateSelectedOptions:function(e){var t=[];e.forEach((function(e){return t.push(JSON.parse(e))}));var a=this.resultData.fields.filter((function(t){return!e.includes(JSON.stringify(t))}));this.resultData.fields=[].concat(t,Object(O["a"])(a)),this.prevSelectedOptions=e}})},$=I,j=(a("a113"),Object(g["a"])($,S,q,!1,null,"0018f3c9",null)),E=j.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"importConfig"},[a("el-form",{ref:"importData",staticClass:"demo-importData",attrs:{model:e.importData,rules:e.rules}},[a("el-form-item",{attrs:{prop:"certificate_importData"}},[a("el-checkbox-group",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.importData.certificate_importData,callback:function(t){e.$set(e.importData,"certificate_importData",t)},expression:"importData.certificate_importData"}}),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#","on-change":e.handlePreview,limit:1,"file-list":e.fileLogoList,"on-exceed":e.handleExceed,"auto-upload":!1}},[a("div",{staticClass:"uploadLogo"}),a("div",{staticClass:"el-upload__text"},[e._v("点击上传文件")]),a("br"),a("div",{staticClass:"el-upload__tip"},[e._v("支持xls、xlsx格式")])])],1),a("el-form-item",{staticClass:"btn",staticStyle:{"margin-top":"32px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveConfig("importData")}}},[e._v("保存配置")]),a("el-button",{on:{click:function(t){return e.lastStep("importData")}}},[e._v("上一步")])],1)],1)],1)},P=[],F=(a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),{data:function(){return{importData:{certificate_importData:"",certConfigId:""},formDataInfo:null,fileLogoList:[],rules:{certificate_importData:[{required:!0,message:"请上传文件",trigger:"change"}]}}},computed:Object(c["a"])({},Object(d["b"])(["certificate_Id","step"])),created:function(){},methods:Object(c["a"])(Object(c["a"])({},Object(d["c"])("user",["SET_CERTIFICATE_ID","SET_STEP","SET_LOADING"])),{},{saveConfig:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.importExcelData_Way()}))},importExcelData_Way:function(){var e=this;this.SET_LOADING(!0);this.certificate_Id,this.importData.certificate_importData;Object(l["j"])(this.formDataInfo).then((function(t){0===t.code?(e.SET_LOADING(!1),e.$router.push("/createCertList")):(e.SET_LOADING(!1),e.$message({message:"系统错误",type:"error",duration:2e3}))}))},handlePreview:function(e,t){var a=this;console.log(e),this.getBase64(e.raw).then((function(t){a.formDataInfo=new FormData,a.formDataInfo.append("certConfigId",a.certificate_Id),a.formDataInfo.append("file",e.raw),a.importData.certificate_importData=URL.createObjectURL(e.raw)}))},handlePreviewLogo:function(e,t){var a=this;console.log(e),this.getBase64(e.raw).then((function(t){a.importData.certificate_logo=URL.createObjectURL(e.raw)}))},getBase64:function(e){return new Promise((function(t,a){var r=new FileReader,i="";r.readAsDataURL(e),r.onload=function(){i=r.result},r.onerror=function(e){a(e)},r.onloadend=function(){t(i)}}))},handleExceed:function(e,t){this.$message({message:"当前限制选择 1 个文件，请移除后再上传！",type:"warning"})},addField:function(){this.importData.certificate_fields.push(JSON.parse(JSON.stringify(this.fieldTemplate)))},deleteField:function(e){console.log(e),this.importData.certificate_fields.splice(this.importData.certificate_fields.indexOf(e),1)},lastStep:function(){this.$emit("jumpPage",3)}})}),N=F,T=(a("33ea"),Object(g["a"])(N,k,P,!1,null,"5a0a7fc2",null)),R=T.exports,Q={components:{certificateConfigImg:h,certificateConfigQuery:x,certificateConfigResult:E,certificateConfigImport:R},data:function(){return{active:1}},created:function(){},methods:{jumpPage:function(e){this.active=e}}},A=Q,U=(a("6a1e"),Object(g["a"])(A,r,i,!1,null,"54a9baa0",null));t["default"]=U.exports},"0fbe":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"previewResult-dialog"},[r("div",{staticClass:"certificateInfo"},[r("img",{staticClass:"certBg",attrs:{src:a("98e2")}}),r("img",{staticClass:"cert",attrs:{src:e.previewCertResultData.picPreview}}),r("span",{staticClass:"certificateTitle"},[e._v(e._s(e.previewCertResultData.title))]),r("div",{staticClass:"certificateInfo_bottom"})]),r("div",{staticClass:"certificateFileds"},e._l(e.previewCertResultData.enableFields,(function(t,a){return r("div",{staticClass:"filed"},[r("span",[e._v(e._s(JSON.parse(t).filedNameZh))]),r("span",[e._v(e._s(JSON.parse(t).filedDemo))])])})),0),r("div",{staticClass:"certificateInfo_top"}),r("div",{staticClass:"logo"},[r("img",{attrs:{src:e.previewCertResultData.bottomLog}})]),r("div",{staticClass:"support"},[r("span",[e._v(e._s(e.previewCertResultData.explainDoc))])])])},i=[],s={components:{},props:["previewCertResultData"],data:function(){return{}},created:function(){},mounted:function(){},methods:{}},n=s,o=(a("1be7"),a("2877")),c=Object(o["a"])(n,r,i,!1,null,"a694684a",null);t["a"]=c.exports},"185b":function(e,t,a){"use strict";a("ee04")},"1be7":function(e,t,a){"use strict";a("23c9")},"23c9":function(e,t,a){},"242f":function(e,t,a){},"33ea":function(e,t,a){"use strict";a("a821")},3655:function(e,t,a){},"3b12":function(e,t,a){},"6a1e":function(e,t,a){"use strict";a("b944")},"6d1d":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"previewPic-dialog"},[a("img",{attrs:{src:e.ImgUrl}})])},i=[],s={components:{},props:["ImgUrlData"],data:function(){return{ImgUrl:this.ImgUrlData}},watch:{ImgUrlData:function(e){this.ImgUrl=e}},created:function(){},mounted:function(){},methods:{}},n=s,o=(a("f768"),a("2877")),c=Object(o["a"])(n,r,i,!1,null,"16ca893a",null);t["a"]=c.exports},"841c":function(e,t,a){e.exports=a.p+"static/img/add_filed.b9f2c8da.svg"},"8fd4":function(e,t,a){},"98e2":function(e,t,a){e.exports=a.p+"static/img/bg_certificate.b81d8c94.png"},"9dc0":function(e,t,a){e.exports=a.p+"static/img/add_img.7c34aaea.svg"},a113:function(e,t,a){"use strict";a("3655")},a821:function(e,t,a){},ab4e:function(e,t,a){"use strict";a("8fd4")},ad8f:function(e,t,a){"use strict";a.d(t,"f",(function(){return i})),a.d(t,"m",(function(){return s})),a.d(t,"h",(function(){return n})),a.d(t,"n",(function(){return o})),a.d(t,"i",(function(){return c})),a.d(t,"o",(function(){return l})),a.d(t,"l",(function(){return u})),a.d(t,"k",(function(){return f})),a.d(t,"j",(function(){return d})),a.d(t,"c",(function(){return p})),a.d(t,"g",(function(){return m})),a.d(t,"e",(function(){return g})),a.d(t,"d",(function(){return v})),a.d(t,"a",(function(){return h})),a.d(t,"p",(function(){return b})),a.d(t,"b",(function(){return D}));var r=a("b775");function i(e){return Object(r["a"])({url:"/certapp-cert/cert/getCertList",method:"get",params:e})}function s(e){return Object(r["a"])({url:"/certapp-cert/cert/saveCertPic",method:"post",data:e})}function n(e){return Object(r["a"])({url:"/certapp-cert/cert/getQueryPage",method:"get",params:e})}function o(e){return Object(r["a"])({url:"/certapp-cert/cert/saveQueryPage",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/certapp-cert/cert/getQueryResultPage",method:"get",params:e})}function l(e){return Object(r["a"])({url:"certapp-cert/cert/saveQueryResultPage",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/certapp-cert/cert/queryCertPic",method:"get",params:e})}function f(e){return Object(r["a"])({url:"/certapp-cert/cert/previewCertPic",method:"get",params:e})}function d(e){return Object(r["a"])({url:"/certapp-cert/cert/importData",method:"post",data:e})}function p(e){return Object(r["a"])({url:"/certapp-cert/cert/deleteById",method:"delete",params:e})}function m(e){return Object(r["a"])({url:"/certapp-cert/cert/getFiledInfo",method:"get",params:e})}function g(e){return Object(r["a"])({url:"/certapp-cert/cert/downloadById",method:"get",params:e})}function v(e){return Object(r["a"])({url:"/certapp-cert/cert/download",method:"get",params:e})}function h(e){return Object(r["a"])({url:"/certapp-cert/cert/cochain",method:"get",params:e})}function b(e){return Object(r["a"])({url:"/certapp-cert/cert/updateCertState",method:"get",params:e})}function D(e){return Object(r["a"])({url:"/certapp-cert/cert/copeCert",method:"get",params:e})}},b944:function(e,t,a){},c150:function(e,t,a){e.exports=a.p+"static/img/recover.80298bbc.svg"},c328:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"previewQuery-dialog"},[a("div",{staticClass:"banner"},[a("img",{attrs:{src:e.previewCertQueryData.banner}}),a("div",{staticClass:"banner_bottom"})]),a("div",{staticClass:"org"},[a("i",{staticClass:"icon"}),a("span",{staticClass:"cert"},[e._v("发证机构:")]),a("span",[e._v(e._s(e.previewCertQueryData.certOrg))])]),a("div",{staticClass:"input"},[a("div",{staticClass:"enter"},[a("span",[e._v(e._s(e.previewCertQueryData.searchHint))]),a("i",{staticClass:"icon"})])]),a("div",{staticClass:"logo"},[a("img",{attrs:{src:e.previewCertQueryData.bottomLog}})]),a("div",{staticClass:"support"},[a("span",[e._v(e._s(e.previewCertQueryData.explainDoc))])])])},i=[],s={components:{},props:["previewCertQueryData"],data:function(){return{}},created:function(){},mounted:function(){},methods:{}},n=s,o=(a("185b"),a("2877")),c=Object(o["a"])(n,r,i,!1,null,"735c32d5",null);t["a"]=c.exports},cd9b:function(e,t,a){"use strict";a("242f")},d02e:function(e,t,a){e.exports=a.p+"static/img/eye.e853f9fe.svg"},ee04:function(e,t,a){},f768:function(e,t,a){"use strict";a("3b12")},f8a5:function(e,t,a){e.exports=a.p+"static/img/downLoad_filed.6f7aa20d.svg"}}]);