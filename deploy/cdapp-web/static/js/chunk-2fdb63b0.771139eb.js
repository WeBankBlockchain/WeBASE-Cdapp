(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2fdb63b0"],{"0094":function(t,e,a){},"091f":function(t,e,a){t.exports=a.p+"static/img/downLoad.453c6d35.svg"},"3b12":function(t,e,a){},"587e":function(t,e,a){t.exports=a.p+"static/img/publish.1b3bf1a6.svg"},6853:function(t,e,a){"use strict";a("0094")},"6d1d":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"previewPic-dialog"},[a("img",{attrs:{src:t.ImgUrl}})])},n=[],c={components:{},props:["ImgUrlData"],data:function(){return{ImgUrl:this.ImgUrlData}},watch:{ImgUrlData:function(t){this.ImgUrl=t}},created:function(){},mounted:function(){},methods:{}},i=c,o=(a("f768"),a("2877")),s=Object(o["a"])(i,r,n,!1,null,"16ca893a",null);e["a"]=s.exports},"7f52":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"header"},[0===t.certStatus?r("div",{staticClass:"uploadExcel"},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#","on-change":t.handlePreview,"file-list":t.fileList,"auto-upload":!1}},[r("img",{staticClass:"logo",attrs:{src:a("fc68")}}),r("span",{staticClass:"operateSpan"},[t._v("重新上传excel")])])],1):t._e(),0===t.certStatus?r("div",{staticClass:"certCochain",on:{click:function(e){return t.coChaining()}}},[r("img",{staticClass:"logo",attrs:{src:a("84c9")}}),r("span",{staticClass:"operateSpan"},[t._v("证书上链")])]):t._e(),1===t.certStatus?r("div",{staticClass:"publish",on:{click:function(e){return t.publish()}}},[r("img",{staticClass:"logo",attrs:{src:a("587e")}}),r("span",{staticClass:"operateSpan"},[t._v("对外发布")])]):t._e(),2===t.certStatus?r("div",{staticClass:"stopPulish",on:{click:function(e){return t.stopPulish()}}},[r("span",{staticClass:"operateSpan"},[t._v("停止发布")])]):t._e(),null!==t.certStatus?r("div",{staticClass:"downLoadCert",on:{click:function(e){return t.downLoadALl()}}},[r("img",{staticClass:"logo",attrs:{src:a("091f")}}),r("span",{},[t._v("下载所有证书")])]):t._e()]),r("div",{staticClass:"configData"},[t.certList.length>0?r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.certList}},[t._l(t.headerData,(function(e){return r("el-table-column",{key:e.filedSerial,attrs:{label:e.filedNameZh,"show-overflow-tooltip":"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return["certStatus"!==e.filedName?[r("span",[t._v(t._s(a.row[e.filedName]))])]:[r("span",{class:t.classSpan(a.row)},[t._v(t._s(t.textStatus(a.row)))])]]}}],null,!0)})})),r("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.preview(e.row)}}},[t._v("预览")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.downLoad(e.row)}}},[t._v("下载")])]}}],null,!1,3160811952)})],2):t._e()],1),t.previewPicShow?r("el-dialog",{staticClass:"dialogPreviewPic",attrs:{visible:t.previewPicShow,width:"800px",height:"560px","append-to-body":!0,center:""},on:{"update:visible":function(e){t.previewPicShow=e}}},[r("preview-pic",{attrs:{ImgUrlData:t.previewCertPicData}})],1):t._e()],1)},n=[],c=a("c7eb"),i=a("1da1"),o=a("5530"),s=(a("d3b7"),a("159b"),a("b0c0"),a("ac1f"),a("5319"),a("ace4"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("d81d"),a("99af"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("ad8f")),u=a("6d1d"),d=a("c4e3"),l=a.n(d),f=a("21a6"),p=a("2f62"),h={components:{previewPic:u["a"]},data:function(){return{headerData:[],certList:[],fileList:[],certStatus:null,previewPicShow:!1,previewCertPicData:null,downLoadData:null,importData:{certificate_importData:"",certConfigId:""},formDataInfo:null}},watch:{},computed:Object(o["a"])({},Object(p["b"])(["certificate_Id","step"])),mounted:function(){this.getCertListData()},methods:Object(o["a"])(Object(o["a"])({},Object(p["c"])("user",["SET_CERTIFICATE_ID","SET_STEP","SET_LOADING"])),{},{getCertListData:function(){var t=this;this.SET_LOADING(!0);var e={certConfigId:this.certificate_Id};Object(s["g"])(e).then((function(e){t.certList=[],t.SET_LOADING(!1),0===e.code?(t.headerData=e.result.certFiledInfo,t.headerData.push({filedName:"certStatus",filedNameZh:"上链状态",filedSerial:"666"}),e.result.filedInfoResp.forEach((function(a,r){var n=a.filedInfo.split(";");t.certList[r]={},t.headerData.forEach((function(e,a){t.certList[r][e.filedName]=n[a]})),t.certList[r].certStatus=e.result.certState,t.certList[r].id=a.id})),t.certStatus=e.result.certState):t.$message({message:"系统错误",type:"error",duration:2e3})}))},coChaining:function(){var t=this;this.$confirm("上链后证书内容将不可修改巴啦啦啦提示说明","确定上链所有证书？",{customClass:"messageBox_coChain",confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){t.coChaining_way()})).catch((function(){console.log("error")}))},classSpan:function(t){var e="";switch(t.certStatus){case 0:e="unchaining";break;case 1:e="chaining";break;case 2:e="released";break;default:e="none"}return e},textStatus:function(t){var e="";switch(t.certStatus){case 0:e="未上链";break;case 1:e="已上链";break;case 2:e="已发布";break;default:e="none"}return e},preview:function(t){var e=this,a={id:t.id};Object(s["e"])(a).then((function(t){0===t.code?(e.previewCertPicData=t.result,e.previewPicShow=!0):e.$message({message:"系统错误",type:"error",duration:2e3})}))},downLoad:function(t){var e=this,a={id:t.id};Object(s["e"])(a).then((function(a){if(0===a.code){var r=a.result,n=document.createElement("a");n.href=r,n.download=t.name+".png",document.body.appendChild(n),n.click(),document.body.removeChild(n)}else e.$message({message:"系统错误",type:"error",duration:2e3})}))},downLoadALl:function(){var t=this;return Object(i["a"])(Object(c["a"])().mark((function e(){var a;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.SET_LOADING(!0),a={certConfigId:t.certificate_Id},Object(s["d"])(a).then((function(e){t.SET_LOADING(!1),0===e.code?(t.downLoadData=e.result,t.downloadImages()):t.$message({message:"系统错误",type:"error",duration:2e3})}));case 3:case"end":return e.stop()}}),e)})))()},downloadImages:function(){var t=this;return Object(i["a"])(Object(c["a"])().mark((function e(){var a,r,n;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=new l.a,r=a.folder("images"),t.downLoadData.forEach((function(t,e){var a=t.certPic.substring(t.certPic.indexOf("/")+1,t.certPic.indexOf(";base64")),n=t.certPic.replace(/^data:image\/\w+;base64,/,""),c=new Uint8Array(atob(n).split("").map((function(t){return t.charCodeAt(0)})));r.file("image_".concat(e+1,".").concat(a),c,{base64:!0})})),e.next=6,a.generateAsync({type:"blob"});case 6:n=e.sent,Object(f["saveAs"])(n,"certificateImages.zip"),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.error("Error while downloading images:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},handlePreview:function(t,e){var a=this;this.SET_LOADING(!0),console.log(t),this.getBase64(t.raw).then((function(e){a.formDataInfo=new FormData,a.formDataInfo.append("certConfigId",a.certificate_Id),a.formDataInfo.append("file",t.raw),a.importData.certificate_importData=URL.createObjectURL(t.raw),Object(s["j"])(a.formDataInfo).then((function(t){0===t.code?(a.SET_LOADING(!1),a.getCertListData()):(a.SET_LOADING(!1),a.$message({message:"系统错误",type:"error",duration:2e3}))}))}))},getBase64:function(t){return new Promise((function(e,a){var r=new FileReader,n="";r.readAsDataURL(t),r.onload=function(){n=r.result},r.onerror=function(t){a(t)},r.onloadend=function(){e(n)}}))},coChaining_way:function(){var t=this;this.SET_LOADING(!0);var e={certConfigId:this.certificate_Id};Object(s["a"])(e).then((function(e){0===e.code?(t.SET_LOADING(!1),t.certStatus=1,t.getCertListData()):(t.SET_LOADING(!1),t.$message({message:"系统错误",type:"error",duration:2e3}))}))},publish:function(){var t=this;this.SET_LOADING(!0);var e={certConfigId:this.certificate_Id,state:!0};Object(s["p"])(e).then((function(e){0===e.code?(t.SET_LOADING(!1),t.certStatus=2,t.getCertListData()):(t.SET_LOADING(!1),t.$message({message:"系统错误",type:"error",duration:2e3}))}))},stopPulish:function(){var t=this;this.$confirm("停止发布后将无法查询该证书","确定停止发布？",{customClass:"messageBox_coChain",confirmButtonText:"停止发布",cancelButtonText:"取消"}).then((function(){t.stopPulish_way()})).catch((function(){console.log("error")}))},stopPulish_way:function(){var t=this;this.SET_LOADING(!0);var e={certConfigId:this.certificate_Id,state:!1};Object(s["p"])(e).then((function(e){0===e.code?(t.SET_LOADING(!1),t.certStatus=1,t.getCertListData()):(t.SET_LOADING(!1),t.$message({message:"系统错误",type:"error",duration:2e3}))}))}})},m=h,g=(a("6853"),a("2877")),b=Object(g["a"])(m,r,n,!1,null,"2b159789",null);e["default"]=b.exports},"84c9":function(t,e,a){t.exports=a.p+"static/img/certCoChain.ede3a6fd.svg"},ad8f:function(t,e,a){"use strict";a.d(e,"f",(function(){return n})),a.d(e,"m",(function(){return c})),a.d(e,"h",(function(){return i})),a.d(e,"n",(function(){return o})),a.d(e,"i",(function(){return s})),a.d(e,"o",(function(){return u})),a.d(e,"l",(function(){return d})),a.d(e,"k",(function(){return l})),a.d(e,"j",(function(){return f})),a.d(e,"c",(function(){return p})),a.d(e,"g",(function(){return h})),a.d(e,"e",(function(){return m})),a.d(e,"d",(function(){return g})),a.d(e,"a",(function(){return b})),a.d(e,"p",(function(){return v})),a.d(e,"b",(function(){return w}));var r=a("b775");function n(t){return Object(r["a"])({url:"/certapp-cert/cert/getCertList",method:"get",params:t})}function c(t){return Object(r["a"])({url:"/certapp-cert/cert/saveCertPic",method:"post",data:t})}function i(t){return Object(r["a"])({url:"/certapp-cert/cert/getQueryPage",method:"get",params:t})}function o(t){return Object(r["a"])({url:"/certapp-cert/cert/saveQueryPage",method:"post",data:t})}function s(t){return Object(r["a"])({url:"/certapp-cert/cert/getQueryResultPage",method:"get",params:t})}function u(t){return Object(r["a"])({url:"certapp-cert/cert/saveQueryResultPage",method:"post",data:t})}function d(t){return Object(r["a"])({url:"/certapp-cert/cert/queryCertPic",method:"get",params:t})}function l(t){return Object(r["a"])({url:"/certapp-cert/cert/previewCertPic",method:"get",params:t})}function f(t){return Object(r["a"])({url:"/certapp-cert/cert/importData",method:"post",data:t})}function p(t){return Object(r["a"])({url:"/certapp-cert/cert/deleteById",method:"delete",params:t})}function h(t){return Object(r["a"])({url:"/certapp-cert/cert/getFiledInfo",method:"get",params:t})}function m(t){return Object(r["a"])({url:"/certapp-cert/cert/downloadById",method:"get",params:t})}function g(t){return Object(r["a"])({url:"/certapp-cert/cert/download",method:"get",params:t})}function b(t){return Object(r["a"])({url:"/certapp-cert/cert/cochain",method:"get",params:t})}function v(t){return Object(r["a"])({url:"/certapp-cert/cert/updateCertState",method:"get",params:t})}function w(t){return Object(r["a"])({url:"/certapp-cert/cert/copeCert",method:"get",params:t})}},f768:function(t,e,a){"use strict";a("3b12")},fc68:function(t,e,a){t.exports=a.p+"static/img/upload.8dcba8bc.svg"}}]);